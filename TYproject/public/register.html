<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salon and Freelancer Registration</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-firestore-compat.js"></script>

    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-image: linear-gradient(to bottom right, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0)), url(https://firebasestorage.googleapis.com/v0/b/snaplooks-bd932.appspot.com/o/pictures%2Fregister_salon1blure.jpg?alt=media&token=912d5e68-c036-464a-9997-db1deb1f7c7a);
            background-size: cover;
            background-position: center;
        }

        .registration-container {
            background-color: #ffffffc8;
            padding: 40px; /* Adjusted padding */
            border-radius: 30px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px; /* Adjusted width */
            height: 48%;
            margin-left: auto;
            margin-right: 10%;
        }

        h2 {
            text-align: center;
            color: #333;
            margin-top: 1px;
        }

        .form-group {
            margin-bottom: 12px;
        }

        label {
            display: block;
            margin-bottom: 6px; /* Adjusted margin */
            color: #555;
            font-size: 14px;
        }

        input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 13px;
            font-size: 14px;
        }
        .toggle-group {
            display: flex;
            overflow: hidden;
            border-radius: 30px;
            background-color: #ddd;
        }

        .toggle-button {
            flex: 1;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            user-select: none;
            font-size: 14px;
            transition: background-color 0.3s, color 0.3s, opacity 0.3s; /* Added transition for opacity */
        }

        .toggle-button.active {
            background-color: #242323;
            color: #fff;
            opacity: 1; /* Ensuring full opacity when active */
        }

        .toggle-button:not(.active) {
            opacity: 0.7; /* Setting default opacity for inactive buttons */
        }

        button {
            background-color: #242323;
            color: #ddd;
            padding: 10px; /* Adjusted padding */
            border: none;
            margin-top: 20px;
            border-radius: 30px;
            cursor: pointer;
            width: 100%;
            font-size: 14px;
            transition: background-color 0.3s, color 0.3s;
            border: 0.5px solid black;
        }

        button:hover {
            background-color: #ffffff;
            color: #242323;
        }


        .loading-spinner {
            display: none;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-top: 4px solid #ffffff;
            border-radius: 50%;
            width: 50px; /* Adjusted width for a larger spinner */
            height: 50px; /* Adjusted height for a larger spinner */
            animation: spin 1s linear infinite;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 999; /* Ensures the spinner is on top of other elements */
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
        #partnerText {
            color: #fff;
            margin-right: 20px;
            align-self: center;
            font-size: 45px;
            margin-top: -250px;
            margin-left: 65px;
        }

        .logo {
            width: 200px;
            cursor: pointer;
            filter: invert(100%);
            margin-bottom: -20px;
        }
    </style>
</head>
<body>
    <div>
        <p id="partnerText"><img src="logo1.png" class="logo"><br>Partner up with Snaplook's</p>
    </div>

    <div class="registration-container">
        <h2>Registration</h2>
        <form id="registrationForm">
            <div class="form-group toggle-group">
                <div class="toggle-button active" onclick="setUserType('salon')">Salon</div>
                <div class="toggle-button" onclick="setUserType('freelancer')">Freelancer</div>
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>

            <button type="button" onclick="registerUser()">Register</button>
            <div class="loading-spinner" id="loadingSpinner"></div>
            <p style="margin-top: 10px; text-align: center; font-size: 14px;">
                Already have an account? <a href="login.html">Login here</a>.
            </p>
        </form>
    </div>

    <script>
        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBj1haaSvpv6SHe8PwX5wazT56DahPOKQQ",
            authDomain: "snaplooks-bd932.firebaseapp.com",
            databaseURL: "https://snaplooks-bd932-default-rtdb.firebaseio.com/",
            projectId: "snaplooks-bd932",
            storageBucket: "snaplooks-bd932.appspot.com",
            messagingSenderId: "680311673132",
            appId: "1:680311673132:web:5d55f0b0fe817b8ac39c89"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        function registerUser() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const userType = document.querySelector('.toggle-button.active').innerText.toLowerCase();
            const loadingSpinner = document.getElementById("loadingSpinner");

            loadingSpinner.style.display = "block";

            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    userCredential.user.sendEmailVerification();

                    const userId = userCredential.user.uid;
                    const userCollection = (userType === 'salon') ? 'R_salons' : 'R_freelancers';

                    firebase.firestore().collection(userCollection).doc(userId).set({
                        email: email,
                        // Add other fields as needed
                    })
                        .then(() => {
                            alert("Registration proceeded! Please check your email for verification.");
                            window.location.href = "login.html";
                        })
                        .catch((error) => {
                            alert("Error storing user data in Firestore: " + error.message);
                        });
                })
                .catch((error) => {
                    alert("Error creating user: " + error.message);
                })
                .finally(() => {
                    loadingSpinner.style.display = "none";
                });
        }

        function setUserType(type) {
            const buttons = document.querySelectorAll('.toggle-button');
            buttons.forEach(button => button.classList.remove('active'));

            const selectedButton = Array.from(buttons).find(button => button.innerText.toLowerCase() === type.toLowerCase());
            selectedButton.classList.add('active');
        }
    </script>
</body>
</html>
